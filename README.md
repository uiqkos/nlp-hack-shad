# Chat Thread Summarizer Bot

Telegram-бот для суммаризации тредов в учебных чатах.

## Возможности

- `/summarize` — создает структурированное резюме текущего треда
- `/clear` — очищает накопленную историю треда
- Итеративная суммаризация длинных тредов (разбиение на чанки)
- Фильтрация оффтопика и нерелевантных сообщений

## Установка

```bash
pip install -r requirements.txt
cp .env.example .env
# Заполните .env своими токенами
```

## Настройка

1. Создайте бота через [@BotFather](https://t.me/BotFather)
2. Получите API ключ на [OpenRouter](https://openrouter.ai/)
3. Заполните `.env` файл

## Запуск

```bash
python bot.py
```

## Использование

1. Добавьте бота в группу с включенными топиками
2. Дайте боту права на чтение сообщений
3. Бот начнет накапливать историю сообщений в тредах
4. Используйте `/summarize` в любом треде для получения резюме

## Архитектура

- **bot.py** — Telegram бот, накопление сообщений
- **summarizer.py** — логика итеративной суммаризации
- **llm_client.py** — клиент для OpenRouter API
- **config.py** — конфигурация

## Итеративная суммаризация

Для длинных тредов (>20 сообщений):
1. Разбиение на чанки по 20 сообщений
2. Суммаризация каждого чанка отдельно
3. Объединение всех резюме в финальное структурированное резюме
