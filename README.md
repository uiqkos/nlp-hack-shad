# Chat Summarizer Bot

Telegram-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π **—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ –≤ SQLite** –∏ –ø–æ –∫–æ–º–∞–Ω–¥–µ —Å—Ç—Ä–æ–∏—Ç **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ–∑—é–º–µ —Å ‚Äú–ø—Ä–æ–±–ª–µ–º–∞–º–∏‚Äù** (—Å—Ç–∞—Ç—É—Å—ã ‚úÖ/üî∂/‚ùå). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–∫–∞—Ä—Ç–∏–Ω–∫–∏**: –±–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –æ–ø–∏—Å–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –∏–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ vision-–º–æ–¥–µ–ª—å.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö**: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (—Ç–µ–∫—Å—Ç + –ø–æ–¥–ø–∏—Å–∏ –∫ —Ñ–æ—Ç–æ) –≤ `chat_data.db`
- **–°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è**: `/summarize` –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–∑—é–º–µ
- **–ü—Ä–æ–±–ª–µ–º—ã**: —Å–ø–∏—Å–æ–∫ `/problems`, –¥–µ—Ç–∞–ª–∏ `/problem_N`, —Å—Å—ã–ª–∫–∏ `/messages_N`, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ `/solve_N`
- **–í–æ–ø—Ä–æ—Å –ø–æ —Ä–µ–∑—é–º–µ**: `/query <–≤–æ–ø—Ä–æ—Å>` ‚Äî –∞–≥–µ–Ω—Ç –∏—â–µ—Ç –æ—Ç–≤–µ—Ç –≤ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö (–±–µ–∑ ‚Äú–¥–æ–¥—É–º—ã–≤–∞–Ω–∏—è‚Äù)
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞**: `/stats`, `/clear`

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —Å–µ–π—á–∞—Å —Ä–µ–∑—é–º–µ –≤–µ–¥—ë—Ç—Å—è **–Ω–∞ —É—Ä–æ–≤–Ω–µ —á–∞—Ç–∞** (–ø–æ `chat_id`). –ï—Å–ª–∏ –±–æ—Ç –≤ –≥—Ä—É–ø–ø–µ —Å —Ç–æ–ø–∏–∫–∞–º–∏ ‚Äî –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ç–æ–ø–∏–∫–æ–≤ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–±—â–µ–π –±–∞–∑–æ–π —ç—Ç–æ–≥–æ —á–∞—Ç–∞.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python **3.10+**

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (env)

1) –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather) –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω.  
2) –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á –Ω–∞ [OpenRouter](https://openrouter.ai/).  
3) –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Ä—è–¥–æ–º —Å –∫–æ–¥–æ–º:

```env
TELEGRAM_BOT_TOKEN=123456:ABCDEF
OPENROUTER_API_KEY=or-...

# –ú–æ–∂–Ω–æ –Ω–µ –∑–∞–¥–∞–≤–∞—Ç—å (–µ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
OPENROUTER_MODEL=openai/gpt-4.1-mini
OPENROUTER_VISION_MODEL=openai/gpt-4.1-mini
LOG_LEVEL=INFO
```

## –ó–∞–ø—É—Å–∫

```bash
python bot.py
```

## –ë—ã—Å—Ç—Ä—ã–π –≥–∞–π–¥ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º

- **/help** ‚Äî –∫—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
- **/summarize** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Ä–µ–∑—é–º–µ
- **/problems** ‚Äî —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º
- **/problem_N** ‚Äî –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/problem_0`)
- **/messages_N** ‚Äî —Å—Å—ã–ª–∫–∏/–ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–æ–±–ª–µ–º—ã
- **/solve_N** ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å (‚ùå ‚Üí üî∂ ‚Üí ‚úÖ ‚Üí ‚ùå)
- **/query <–≤–æ–ø—Ä–æ—Å>** ‚Äî –≤–æ–ø—Ä–æ—Å –ø–æ —Ä–µ–∑—é–º–µ/–ø—Ä–æ–±–ª–µ–º–∞–º
- **/stats** ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–∞—Ç–∞
- **/clear** ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —á–∞—Ç—É –∏–∑ –ë–î

## –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

- **SQLite –±–∞–∑–∞**: `chat_data.db` (–ª–µ–∂–∏—Ç —Ä—è–¥–æ–º —Å –∫–æ–¥–æ–º)
- –ß—Ç–æ–±—ã ‚Äú—Å–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë‚Äù: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/clear` (—É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–∞—Ç–∞) –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª `chat_data.db` (—É–¥–∞–ª–∏—Ç –≤—Å—ë —Ü–µ–ª–∏–∫–æ–º).

## –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ (–æ—á–µ–Ω—å –∫—Ä–∞—Ç–∫–æ)

- `bot.py` ‚Äî Telegram-–±–æ—Ç: —Å–±–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ–º–∞–Ω–¥—ã
- `database.py` ‚Äî SQLite-—Å–ª–æ–π (—Å–æ–æ–±—â–µ–Ω–∏—è, –ø—Ä–æ–±–ª–µ–º—ã, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —á–∞—Ç–∞)
- `summarizer.py` ‚Äî –∞–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞–Ω–∫–∞–º–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—é–º–µ/–ø—Ä–æ–±–ª–µ–º
- `llm_client.py` ‚Äî –≤—ã–∑–æ–≤—ã OpenRouter (—Ç–µ–∫—Å—Ç + vision)
- `query_agent.py` ‚Äî –∞–≥–µ–Ω—Ç –¥–ª—è `/query` —Å tools (—á–∏—Ç–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã/—Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –ë–î)
